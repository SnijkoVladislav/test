angular.module("app",["ui.router","ui.bootstrap","ngInputModified","angularjs-crypto"]),function(){"use strict";function e(e,n){var t=this;n.get("data.json").then(function(e){t.goods=e.data})}e.$inject=["$scope","$http"],angular.module("app").component("search",{templateUrl:"app/pages/search/search.html",controller:e})}(),angular.module("app").directive("serviceWhaleUsernameValidation",function(){return{require:"ngModel",link:function(e,n,t,a){var o=/^[a-zA-Z0-9]+$/;a.$validators.username=function(e,n){return!!a.$isEmpty(e)||!!o.test(n)}}}}),function(){"use strict";function e(e,n,t,a){var o=this;o.registerSubmit=function(){o.register.$invalid?e.addAlert({type:"danger",msg:"Form not valid"}):(a.logOut(),a.registerUser(o.username,o.email,o.password),e.addAlert({type:"success",msg:"User added successfully"}))}}e.$inject=["alert","$rootScope","$window","login"],angular.module("app").component("register",{templateUrl:"app/pages/register/register.html",controller:e})}(),angular.module("app").directive("serviceWhalePasswordValidation",function(){return{require:"ngModel",link:function(e,n,t,a){var o=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/;a.$validators.password=function(e,n){return!!a.$isEmpty(e)||!!o.test(n)}}}}),angular.module("app").directive("serviceWhaleEmailValidation",function(){return{require:"ngModel",link:function(e,n,t,a){var o=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;a.$validators.email=function(e,n){return!!a.$isEmpty(e)||!!o.test(n)}}}}),angular.module("app").directive("serviceWhaleConfirmPasswordValidation",function(){return{require:"ngModel",link:function(e,n,t,a){a.$validators.password=function(e,n){return!!a.$isEmpty(e)||n===t.serviceWhaleConfirmPasswordValidation}}}}),function(){"use strict";function e(e,n){function t(){return l}function a(){e.localStorage.removeItem("serviceWhale"),l=!1}function o(t,a,o){e.localStorage.setItem("serviceWhale",angular.toJson({name:t,email:a,password:CryptoJS.AES.encrypt(o,n.base64Key,{iv:n.iv}).toString()}))}function r(t,a){var o=angular.fromJson(e.localStorage.getItem("serviceWhale"));if(!o)return!1;var r=CryptoJS.lib.CipherParams.create({ciphertext:CryptoJS.enc.Base64.parse(o.password)}),i=CryptoJS.AES.decrypt(r,n.base64Key,{iv:n.iv}).toString(CryptoJS.enc.Utf8);return o.name===t&&i===a?(l=!0,!0):(l=!1,!1)}var l=!1;return{checkUser:r,registerUser:o,checkLogin:t,logOut:a}}e.$inject=["$window","$rootScope"],angular.module("app").factory("login",e)}(),function(){"use strict";function e(e,n,t,a,o,r){var l=this;l.loginSubmit=function(){r.checkUser(l.username,l.password)?(a.addAlert({type:"success",msg:"login successfully"}),o.path("/search")):a.addAlert({type:"danger",msg:"login or password not valid"})}}e.$inject=["$window","$scope","$rootScope","alert","$location","login"],angular.module("app").component("login",{templateUrl:"app/pages/login/login.html",controller:e})}(),function(){"use strict";function e(e){var n=this;n.toggle=function(e){n.ratingValue=e+1},e.$watch("$ctrl.ratingValue",function(e,t){if(t){n.stars=[];for(var a=0;a<5;a++)n.stars.push({filled:a<n.ratingValue})}})}e.$inject=["$scope"],angular.module("app").component("serviceWhaleRating",{templateUrl:"app/components/rating/rating.html",controller:e,bindings:{ratingValue:"="}})}(),function(){"use strict";angular.module("app").component("serviceWhaleHeader",{templateUrl:"app/components/header/header.html"})}(),function(){"use strict";function e(e){var n=this;n.models={dataFrom:"",dataTo:"",inStock:!1,priceFrom:"",priceTo:"",color:"any color"},n.filters={inStock:function(e){return!n.models.inStock||e.inStock},dataFrom:function(e){return n.models.dataFrom.valueOf()-864e5<new Date(e.data).valueOf()},dataTo:function(e){return n.models.dataTo.valueOf()-864e5>new Date(e.data).valueOf()},priceFrom:function(e){return e.price>n.models.priceFrom},priceTo:function(e){return e.price<n.models.priceTo},color:function(e){return"any color"===n.models.color||e.color===n.models.color}},e.$on("inputModified.formChanged",function(){n.filterList=n.list,Object.keys(n.models).forEach(function(e){n.models[e]&&(n.filterList=n.filterList.filter(n.filters[e]))})}),n.colors=["any color","brown","blue","green"],n.colorsChange=function(e){n.models.color=e,n.filterForm.color.$setPristine()},n.dataFromOpen=function(){n.dataFrom.opened=!0},n.dataToOpen=function(){n.dataTo.opened=!0},n.dataFrom={opened:!1},n.dataTo={opened:!1}}e.$inject=["$scope"],angular.module("app").component("serviceWhaleCartListFilter",{templateUrl:"app/components/goods-list-filter/goods-list-filter.html",controller:e,bindings:{filterList:"=",list:"="}})}(),function(){"use strict";function e(e){var n=this;n.addItemToBasket=e.addItem}e.$inject=["basket"],angular.module("app").component("serviceWhaleCartList",{templateUrl:"app/components/goods-list/goods-list.html",controller:e,bindings:{items:"="}})}(),function(){"use strict";function e(){function e(e){t.push(e)}function n(e){t.splice(e,1)}var t=[];return{addItem:e,delItem:n,goods:t}}angular.module("app").factory("basket",e)}(),function(){"use strict";function e(e,n){var t=this;t.basket=n}e.$inject=["$scope","basket"],angular.module("app").component("serviceWhaleBasket",{templateUrl:"app/components/basket/basket.html",controller:e})}(),function(){"use strict";function e(){function e(e){t.push(e)}function n(e){t.splice(e,1)}var t=[];return{addAlert:e,closeAlert:n,list:t}}angular.module("app").factory("alert",e)}(),function(){"use strict";function e(e,n){var t=this;t.alert=n}e.$inject=["$scope","alert"],angular.module("app").component("serviceWhaleAlert",{templateUrl:"app/components/alert/alert.html",controller:e})}(),angular.module("app").run(["$templateCache",function(e){e.put("app/components/alert/alert.html",'<div class="alert-wrap">\n    <div uib-alert ng-repeat="alert in $ctrl.alert.list" ng-class="\'alert-\' + (alert.type || \'warning\')" close="$ctrl.alert.closeAlert($index)">\n        {{alert.msg}}\n    </div>\n</div>\n'),e.put("app/components/basket/basket.html",'<div ng-if="$ctrl.basket.goods.length">\n  <button class="btn basket-toggle" ng-click="isBasket = !isBasket">\n    <i class="glyphicon glyphicon-shopping-cart"> {{$ctrl.basket.goods.length}}</i>\n  </button>\n  <div class="basket-wrap" ng-show="isBasket">\n    <ul class="basket">\n      <li class="goods" ng-repeat="good in $ctrl.basket.goods track by $index">\n        <span>{{ good.name }}</span>\n        <span>${{ good.price }}</span>\n        <a class="glyphicon glyphicon-minus pull-right" ng-click="$ctrl.basket.delItem($index)"></a>\n      </li>\n    </ul>\n  </div>\n</div>\n'),e.put("app/components/goods-list/goods-list.html",'<div class="row">\n  <table class="table borderless">\n    <thead>\n      <tr>\n        <td></td>\n        <td></td>\n        <td></td>\n      </tr>\n    </thead>\n    <tbody>\n      <tr ng-repeat="item in $ctrl.items">\n        <td class="col-md-4">\n          <div class="media">\n            <a class="thumbnail pull-left" href="#"> <img class="media-object" src="{{item.picture}}"> </a>\n            <div class="media-body">\n              <h3 class="media-heading">{{ item.name }}</h3>\n              <h4 class="media-heading">{{ item.color }}</h4>\n              <service-whale-rating rating-value="item.rating"></service-whale-rating>\n            </div>\n          </div>\n        </td>\n        <td class="col-md-4 text-center">\n          <div class="data-label">{{ item.data | date:\'yyyy-MM-dd\' }}</div>\n          <div>{{ item.inStock ? \'in stock\' : \'not in stock\' }}</div>\n        </td>\n        <td class="col-md-4 text-right">\n          <div class="price-label">${{ item.price }}</div>\n          <button type="button" class="btn btn-primary btn-service-whale" ng-click="$ctrl.addItemToBasket(item)">Add</button>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n'),e.put("app/components/goods-list-filter/goods-list-filter.html",'<form name="$ctrl.filterForm">\n  <div class="form-group">\n    <div class="row">\n      <div class="col-md-4">\n        <div class="input-group">\n          <span class="input-group-addon">Data from</span>\n          <input name="dataFrom" type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="$ctrl.models.dataFrom" is-open="$ctrl.dataFrom.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats" placeholder="Data from">\n          <span class="input-group-btn">\n            <button type="button" class="btn btn-default btn-data-filter" ng-click="$ctrl.dataFromOpen()"><i class="glyphicon glyphicon-calendar"></i></button>\n        </span>\n        </div>\n      </div>\n\n      <div class="col-md-4">\n        <div class="input-group">\n          <span class="input-group-addon">Data to</span>\n          <input name="dataTo" type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="$ctrl.models.dataTo" is-open="$ctrl.dataTo.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats" placeholder="Data to">\n          <span class="input-group-btn">\n            <button type="button" class="btn btn-default btn-data-filter" ng-click="$ctrl.dataToOpen()"><i class="glyphicon glyphicon-calendar"></i></button>\n        </span>\n        </div>\n      </div>\n\n      <div class="col-md-4">\n        <div class="input-group data-input pull-right">\n          <div class="form-check form-check-inline">\n            <label class="form-check-label">\n          <input name="inStock" ng-model="$ctrl.models.inStock" class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1">In stock only</label>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class="form-group">\n    <div class="row">\n      <div class="col-md-4">\n        <div class="input-group">\n          <span class="input-group-addon">Price from</span>\n          <input name="priceFrom" type="text" ng-model-options="{ debounce: 500 }" ng-model="$ctrl.models.priceFrom" class="form-control" placeholder="Price from">\n        </div>\n      </div>\n\n      <div class="col-md-4">\n        <div class="input-group">\n          <span class="input-group-addon">Price to</span>\n          <input name="priceTo" type="text" ng-model-options="{ debounce: 500 }" ng-model="$ctrl.models.priceTo" class="form-control" placeholder="Price to">\n        </div>\n      </div>\n\n      <div class="col-md-4">\n        <div class="btn-group pull-right" uib-dropdown dropdown-append-to-body>\n          <!-- to do: create component selectbox -->\n          <!-- warning: has bag https://github.com/betsol/angular-input-modified/issues/50 . Wait pull request -->\n          <input style="display: none" name="color" ng-model="$ctrl.models.color" type="text">\n          <button id="btn-append-to-body" type="button" class="btn btn-color-select" uib-dropdown-toggle>\n            {{$ctrl.models.color}}<span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="btn-append-to-body">\n            <li role="menuitem" ng-repeat="color in $ctrl.colors"><a href="#" ng-click="$ctrl.colorsChange(color)">{{color}}</a></li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n</form>\n'),e.put("app/components/header/header.html",'<nav class="navbar navbar-default">\r  <div class="container-fluid">\r    <div class="collapse navbar-collapse">\r      <ul class="nav navbar-nav navbar-right">\r        <li><a href="/login">Login</a></li>\r        <li><a href="/register">Register</a></li>\r        <li><a href="/search">Search page</a></li>\r        <li>\r            <service-whale-basket></service-whale-basket>\r        </li>\r      </ul>\r    </div>\r  </div>\r</nav>\r<service-whale-alert></service-whale-alert>\r'),e.put("app/components/rating/rating.html",'<ul class="star-rating">\n  <li ng-repeat="star in $ctrl.stars" class="star" ng-click="$ctrl.toggle($index)">\n    <i class="glyphicon glyphicon-star{{star.filled ? \'\' : \'-empty\'}}"></i>\n  </li>\n</ul>\n'),e.put("app/pages/login/login.html",'<service-whale-header></service-whale-header>\n<div class="container">\n  <div class="row">\n    <div class="col-md-6 col-md-offset-3">\n      <div class="panel panel-login">\n        <div class="panel-heading"></div>\n        <div class="panel-body">\n          <div class="row">\n            <div class="col-lg-12">\n              <form name="$ctrl.loginForm" ng-submit="$ctrl.loginSubmit()">\n                <div class="form-group">\n                  <input type="text" name="username" ng-model="$ctrl.username" class="form-control" placeholder="Username">\n                </div>\n                <div class="form-group">\n                  <input type="password" name="password" ng-model="$ctrl.password" class="form-control" placeholder="Password">\n                </div>\n                <div class="form-group">\n                  <div class="row">\n                    <div class="col-sm-6 col-sm-offset-3">\n                      <input type="submit" class="form-control btn btn-login btn-service-whale" value="Log In">\n                    </div>\n                  </div>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("app/pages/register/register.html",'<service-whale-header></service-whale-header>\n<div class="container">\n  <div class="row">\n    <div class="col-md-6 col-md-offset-3">\n      <div class="panel panel-login">\n        <div class="panel-heading"></div>\n        <div class="panel-body">\n          <div class="row">\n            <div class="col-lg-12">\n              <form name="$ctrl.register" ng-submit="$ctrl.registerSubmit()">\n                <div class="form-group">\n                  <input type="text" required ng-model="$ctrl.username" name="username" service-whale-username-validation class="form-control" placeholder="Username">\n                </div>\n                <div class="form-group">\n                  <input type="text" required ng-model="$ctrl.email" name="email" service-whale-email-validation class="form-control" placeholder="Email Address">\n                </div>\n                <div class="form-group">\n                  <input type="password" required ng-model="$ctrl.password" name="password" service-whale-password-validation class="form-control" placeholder="Password">\n                </div>\n                <div class="form-group">\n                  <input type="password" required ng-model="$ctrl.confirmPassword" name="confirmPassword" service-whale-password-validation service-whale-confirm-password-validation="{{$ctrl.password}}" class="form-control" placeholder="Confirm Password">\n                </div>\n                <div class="form-group">\n                  <div class="row">\n                    <div class="col-sm-6 col-sm-offset-3">\n                      <input type="submit" name="register-submit" class="form-control btn btn-register btn-service-whale" value="Register Now">\n                    </div>\n                  </div>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'),e.put("app/pages/search/search.html",'<service-whale-header></service-whale-header>\n<div class="container search-page">\n  <div class="row">\n    <div class="col-md-12">\n      <div class="panel">\n        <div class="panel-heading">\n          <service-whale-cart-list-filter filter-list="$ctrl.filter" list="$ctrl.goods">\n          </service-whale-cart-list-filter>\n        </div>\n        <div class="panel-body">\n          <service-whale-cart-list items="$ctrl.filter ? $ctrl.filter : $ctrl.goods">\n          </service-whale-cart-list>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n')}]),function(){"use strict";function e(e,n,t){t.html5Mode(!0).hashPrefix("!"),n.otherwise("/login"),e.state("login",{url:"/login",component:"login"}).state("search",{url:"/search",component:"search"}).state("register",{url:"/register",component:"register"})}e.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],angular.module("app").config(e)}(),function(){"use strict";function e(e,n,t,a,o,r){n.base64Key=CryptoJS.enc.Hex.parse("0123456789abcdef0123456789abcdef"),n.iv=CryptoJS.enc.Hex.parse("abcdef9876543210abcdef9876543210"),n.$on("$locationChangeStart",function(){t.checkLogin()||"/search"!==a.path()||(a.path("/login"),o.addAlert({type:"danger",msg:"login please"}))})}e.$inject=["cfCryptoHttpInterceptor","$rootScope","login","$location","alert","$document"],angular.module("app").run(e)}();
//# sourceMappingURL=../maps/scripts/app-9b3db95ffe.js.map
